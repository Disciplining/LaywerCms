<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>案例添加</title>
    <link rel="stylesheet" href="/layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="/layuiadmin/style/admin.css" media="all">
</head>

<body>
<div class="layui-fluid">
    <div class="layui-row layui-col-space15">
        <div class="layui-col-md12">
            <div class="layui-card" style="position: relative;">
                <div class="layui-card-header">案例添加adadsf</div>
                <div class="layui-card-body">
                    <div style="margin-top:20px">
                        <form class="layui-form" style="margin-top: 20px;" method="post" action=""  enctype="multipart/form-data">
                            <div class="layui-form-item">
                                <label class="layui-form-label">罪名分类</label>
                                <div class="layui-input-block" >
                                    <select lay-filter="test"  name="typeExpand" id="selectT" lay-verify="required">
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">罪名名称</label>
                                <div class="layui-input-block">
                                    <select  name="name" lay-verify="required" id="selectName">
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">案例标题</label>
                                <div class="layui-input-block">
                                    <input type="text"  required lay-verify="required" name="title" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item layui-form-text">
                                <label class="layui-form-label">案例介绍</label>
                                <div class="layui-input-block">
                                    <textarea name="desc" placeholder="请输入内容" class="layui-textarea"></textarea>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">办案过程</label>
                                <div class="layui-input-block">
                                    <input type="text" required lay-verify="required" name="process" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-input-block">
                                    <button class="layui-btn" lay-submit lay-filter="*">立即提交</button>
                                </div>
                            </div>
                        </form>
                        <a style="position: absolute;left: 250px;bottom: 25px;" href="/getPage/base/chargeMgr"><button class="layui-btn layui-btn-primary">返回上一页</button></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="/layuiadmin/layui/layui.js"></script>
<script>
    layui.use(['form', 'upload', 'jquery'], function() {
        var form = layui.form,
            $ = layui.$,
            upload = layui.upload;
        $.ajax({
            url:'/test.json',
            method:'get',
            success:function(data){
                var html = '';
                var len = data.data.length;
                for(var i = 0 ; i< len;i++){
                    html = html + '<option value="'+ data.data[i].name +'">'+ data.data[i].name +'</option>';
                }
                $('#selectT').html('').append(html)
                form.render('select')
                form.on('select(test)', function(realData){
                    $("#selectName").empty();
                    form.render('select')
                    console.log(realData.value)
                    for(var k = 0 ; k< len;k++){
                        if(data.data[k].name == realData.value) {
                            data.data[k].children.forEach(function(item,index){
                                var selectName = $('#selectName')
                                selectName.append('<option  id="hahah" value="'+ item +'">'+ item +'</option>')
                            });
                            form.render('select')
                        }
                    }
                });
            },
            error:function(data){
                alert(data)
            }
        })
    });
</script>
</body>

</html>